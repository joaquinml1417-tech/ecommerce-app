<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Casa Nova - Inicio</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <script type="module" src="js/navbar.js"></script>

  <div class="container">
    <div class="logo-bienvenida">
      <img src="images/Logo.jpg" alt="Logo Casa Nova">
    </div>

    <h1>Bienvenido a <span class="highlight">Casa Nova</span></h1>
    <p id="mensaje-bienvenida">Explorá nuestros productos o registrate para comenzar.</p>
    <a class="btn" href="pages/registro.html">Ir al registro</a>

    <div class="destacado">
      <h3>¡Descubrí lo nuevo!</h3>
      <p>Productos seleccionados para transformar tu hogar con estilo y tecnología.</p>
    </div>

    <div class="promo-tarjeta">
      <img src="images/promo-visa.webp" alt="Promo Visa" class="promo-img">
      <div class="promo-texto">
        <h3>12 cuotas sin interés con Visa</h3>
        <p>En productos seleccionados de hogar y tecnología. ¡Aprovechá ahora!</p>
        <a href="pages/tecnologia.html" class="btn">Ver productos</a>
      </div>
    </div>

    <div class="barra-scroll">
      <h3>Inspirate con estos productos</h3>
      <div class="scroll-controls">
        <button id="scroll-left" class="scroll-btn">◀</button>
        <button id="scroll-right" class="scroll-btn">▶</button>
      </div>
      <div id="scroll-productos" class="scroll-container"></div>
    </div>

    <div id="productos-home" class="product-grid"></div>
  </div>

  <script src="js/logout.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const logueado = sessionStorage.getItem("usuarioLogueado") === "true";
      const mensajeLogin = sessionStorage.getItem("mensajeLogin");

      const botonRegistro = document.querySelector(".btn");
      const mensaje = document.getElementById("mensaje-bienvenida");

      if (mensajeLogin) {
        alert(mensajeLogin);
        sessionStorage.removeItem("mensajeLogin");
      }

      if (logueado) {
        if (botonRegistro) botonRegistro.style.display = "none";
        if (mensaje) mensaje.textContent = "Bienvenido de nuevo. Explorá nuestras categorías y descubrí productos para tu hogar y vida digital.";

        fetch("data/productos.json")
          .then(res => res.json())
          .then(productos => {
            const categorias = ["decoracion", "tecnologia", "hogar"];
            const contenedor = document.getElementById("productos-home");

            categorias.forEach(cat => {
              const grupo = productos.filter(p => p.categoria === cat).slice(0, 2);
              grupo.forEach(p => {
                const card = document.createElement("div");
                card.className = "product-card";
                card.innerHTML = `
                  <img src="${p.imagen}" alt="${p.titulo}" class="product-img">
                  <h3>${p.titulo}</h3>
                  <p>${p.descripcion}</p>
                  <span class="price">$${p.precio}</span>
                  <div class="cantidad">
                    <button>-</button>
                    <input type="number" value="1" min="1">
                    <button>+</button>
                  </div>
                  <button class="btn">Agregar al carrito</button>
                `;
                contenedor.appendChild(card);
              });
            });
          });
      }

      fetch("data/productos.json")
        .then(res => res.json())
        .then(productos => {
          const aleatorios = productos.sort(() => 0.5 - Math.random()).slice(0, 8);
          const contenedorScroll = document.getElementById("scroll-productos");

          aleatorios.forEach(p => {
            const card = document.createElement("div");
            card.className = "product-card";
            card.innerHTML = `
              <img src="${p.imagen}" alt="${p.titulo}" class="product-img">
              <h3>${p.titulo}</h3>
              <p>${p.descripcion}</p>
              <span class="price">$${p.precio}</span>
            `;
            contenedorScroll.appendChild(card);
          });
        });

      document.getElementById("scroll-left").addEventListener("click", () => {
        document.getElementById("scroll-productos").scrollBy({ left: -300, behavior: "smooth" });
      });

      document.getElementById("scroll-right").addEventListener("click", () => {
        document.getElementById("scroll-productos").scrollBy({ left: 300, behavior: "smooth" });
      });
    });
  </script>

  <footer>
    <p>&copy; 2025 Casa Nova. Todos los derechos reservados.</p>
    <p>Contacto: info@casanova.com.ar</p>
  </footer>
</body>
</html>

